
<html>
<head>
<title>JavaScript file upload</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

</head>
<body>

<h2>Input</h2>  
<form class="input-group" id="img2b64" action="hi/ji">
    <input id="inputFileToLoad" type="file" onchange="encodeImageFileAsURL();" multiple='multiple'/>
    <!-- <input id="" type="text"/> -->
    <input type="text" value="" id="" onkeyup="mask(this, mssn);" onblur="mask(this, mssn)" maxlength="11">
    <button type="submit">Submit</button>
</form>
            
<hr>
    
<h2>Output</h2>        
<div class="output">
    <textarea rows="10" cols="150" class="form-control"></textarea><br>
    <a></a><br><br>
    <img><br>
</div>

</body>
<script>
$('input').keypress(function(event) {
    if (event.which == 13) {
        event.preventDefault();
    }
});
    </script>



<script type="text/javascript">
    function mask(o, f) {
    setTimeout(function () {
        var v = f(o.value);
        if (v != o.value) {
            o.value = v;
        }
    }, 1);
}

function mssn(v) {
    var r = v.replace(/\D/g,"");
    if (r.length > 9) {
        r = r.replace(/^(\d\d\d)(\d{2})(\d{0,4}).*/,"$1-$2-$3");
        return r;
    }
    else if (r.length > 4) {
        r = r.replace(/^(\d\d\d)(\d{2})(\d{0,4}).*/,"$1-$2-$3");
    }
    else if (r.length > 2) {
        r = r.replace(/^(\d\d\d)(\d{0,3})/,"$1-$2");
    }
    else {
        r = r.replace(/^(\d*)/, "$1");
    }
    return r;
}
    
</script>
<script type="text/javascript">
function encodeImageFileAsURL(cb) {
    return function(){
        var file = this.files[0];
        console.log(file)
        var reader  = new FileReader();
        reader.onloadend = function () {
            cb(reader.result);
        }
        reader.readAsDataURL(file);
    }
}

$('#inputFileToLoad').change(encodeImageFileAsURL(function(base64Img){
    $('.output')
      .find('textarea')
        .val(base64Img)
        .end()
      .find('a')
        .attr('href', base64Img)
        .text(base64Img)
        .end()
      .find('img')
        .attr('src', base64Img);
}));
</script>
</html>